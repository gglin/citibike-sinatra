<%# @stations.inspect %>
<% stations = @stations.sort{|st1, st2| st1["stationName"]<=>st2["stationName"]} %>
<h2>New York Citibike Stations</h2>

<div class="row-fluid">
  <div class="span3 ">
    <ul>
    <% stations.each do |station| %>
      <li>
        <strong> <%= station["stationName"] %> </strong>
        <ul>
          <li><%= "+#{station["latitude"]}#{station["longitude"]}" %></li>
        </ul>
      </li>
    <% end %>
    </ul>
  </div>

  <div class="span9 ">
    <div id="map"></div>
    <script type="text/javascript" charset="utf-8">
      var map = L.map('map').setView([40.73, -74.00], 13);
      L.tileLayer('http://tile.stamen.com/terrain/{z}/{x}/{y}.png', {attribution: 'Stamen Terrain'}, {
        attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://cloudmade.com">CloudMade</a>',
        maxZoom: 18
      }).addTo(map);

      <% @stations.each do |station| %>
        L.marker(<%= [station["latitude"], station["longitude"]] %>).addTo(map).bindPopup('<%= station["stationName"]%>');
      <% end %>

    </script>
  </div>

</div>